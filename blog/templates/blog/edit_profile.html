{% extends 'blog/base.html' %}

{% block title %}Edit Profile - Tatana{% endblock %}

{% block content %}
<div class="form-container">
    <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Edit Your Profile</h2>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">
                <i data-feather="user" style="width: 18px; height: 18px;"></i>
                Profile Photo
            </label>
            {{ form.avatar }}
            {% if form.avatar.errors %}
                <div style="color: var(--accent-color); font-size: 0.9rem; margin-top: 0.25rem;">
                    {{ form.avatar.errors }}
                </div>
            {% endif %}
            {% if user.profile.avatar %}
                <div style="margin-top: 1rem;">
                    <div style="width: 80px; height: 80px; border-radius: 40px; overflow: hidden; border: 2px solid #e9ecef; position: relative; margin: 0 auto;">
                        <img src="{{ user.profile.avatar.url }}" alt="Current avatar" 
                             style="position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%);">
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin-top: 0.5rem;">Current photo</p>
                </div>
            {% endif %}
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">
                <i data-feather="edit-3" style="width: 18px; height: 18px;"></i>
                Bio
            </label>
            {{ form.bio }}
            {% if form.bio.errors %}
                <div style="color: var(--accent-color); font-size: 0.9rem; margin-top: 0.25rem;">
                    {{ form.bio.errors }}
                </div>
            {% endif %}
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">
                <i data-feather="map-pin" style="width: 18px; height: 18px;"></i>
                Location
            </label>
            {{ form.location }}
            {% if form.location.errors %}
                <div style="color: var(--accent-color); font-size: 0.9rem; margin-top: 0.25rem;">
                    {{ form.location.errors }}
                </div>
            {% endif %}
        </div>
        
        <div style="margin-bottom: 2rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color);">
                <i data-feather="link" style="width: 18px; height: 18px;"></i>
                Website
            </label>
            {{ form.website }}
            {% if form.website.errors %}
                <div style="color: var(--accent-color); font-size: 0.9rem; margin-top: 0.25rem;">
                    {{ form.website.errors }}
                </div>
            {% endif %}
        </div>
        
        <div style="display: flex; gap: 1rem; justify-content: center;">
            <button type="submit" class="btn btn-primary">
                <i data-feather="save" style="width: 18px; height: 18px;"></i>
                Save Changes
            </button>
            <a href="{% url 'user_profile' user.username %}" class="btn btn-secondary">
                <i data-feather="x" style="width: 18px; height: 18px;"></i>
                Cancel
            </a>
        </div>
    </form>
</div>

<script>
    feather.replace();
</script>
{% endblock %}